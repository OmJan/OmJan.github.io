<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>SICP 1.33 Процедуры как обобщающие методы, упражнения 1.35-1.39 | VelikiiNehochuha Blog</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="ru" href="../../rss.xml">
<link rel="canonical" href="http://velikiinehochuha.github.io/posts/sicp-133-protsedury-kak-obobshchaiushchie-metody-uprazhneniia-135-139/">
<!--[if lt IE 9]><script src="../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><meta name="author" content="Velikii Nehochuha">
<link rel="prev" href="../sicp-protsedury-vysshego-poriadka-uprazhneniia-129-133/" title="SICP Процедуры высшего порядка, упражнения 1.29-1.34" type="text/html">
<link rel="next" href="../sicp-134-protsedury-kak-vozvrashchaemye-znacheniia-uprazhneniia-140-146/" title="SICP 1.34 Процедуры как возвращаемые значения, упражнения 1.40-1.46" type="text/html">
<meta property="og:site_name" content="VelikiiNehochuha Blog">
<meta property="og:title" content="SICP 1.33 Процедуры как обобщающие методы, упражнения 1.35-1.39">
<meta property="og:url" content="http://velikiinehochuha.github.io/posts/sicp-133-protsedury-kak-obobshchaiushchie-metody-uprazhneniia-135-139/">
<meta property="og:description" content="Упражнение 1.35
  
  
   
    
     Показать что золотое сечение  это фиксированная точка трансформации  и используя этот факт, вычислить  через fixed-point.
    
    
     По определению фиксированно">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-01-15T01:36:40+03:00">
<meta property="article:tag" content="procedures_as_general_methods">
<meta property="article:tag" content="scheme">
<meta property="article:tag" content="sicp">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Перейти к главному содержимому</a>
    <div id="container">
            <header id="header"><h1 id="brand"><a href="../../" title="VelikiiNehochuha Blog" rel="home">

        <span id="blog-title">VelikiiNehochuha Blog</span>
    </a></h1>

        
            <nav id="menu"><ul>
<li><a href="../../archive.html">Архив</a></li>
                <li><a href="../../categories/">Тэги</a></li>
                <li><a href="../../rss.xml">RSS лента</a></li>

    
    
    
    </ul></nav></header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">SICP 1.33 Процедуры как обобщающие методы, упражнения 1.35-1.39</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Velikii Nehochuha
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2020-01-15T01:36:40+03:00" itemprop="datePublished" title="2020-01-15 01:36">2020-01-15 01:36</time></a>
            </p>
                    <p class="sourceline"><a href="index.tex" class="sourcelink">Источник</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
 <div class="chapter-block">
  <h2>
   Упражнение 1.35
  </h2>
  <div>
   <div>
    <p>
     Показать что золотое сечение <span class="inline-formula"><img class="img-inline-formula img-formula" width="10" height="15" src="../../formulae/nnhzdqchKKCzaVcrUWETL.T75aNctBowFpJaFA.png" alt="\phi" title="\phi"></span> это фиксированная точка трансформации <span class="inline-formula"><img class="img-inline-formula img-formula" width="94" height="17" src="../../formulae/1nMkSU9aUmKU94eNCFHsW76zCOstgHrGuaN.JA.png" alt="x\mapsto1+1/x" title="x\mapsto1+1/x"></span> и используя этот факт, вычислить <span class="inline-formula"><img class="img-inline-formula img-formula" width="10" height="15" src="../../formulae/nnhzdqchKKCzaVcrUWETL.T75aNctBowFpJaFA.png" alt="\phi" title="\phi"></span> через fixed-point.
    </p>
    <p>
     По определению фиксированной точки <span class="inline-formula"><img class="img-inline-formula img-formula" width="91" height="17" src="../../formulae/WYQmJitF3lTCsDqateA03gibfHVchhI21clQqA.png" alt="\phi=1+1/\phi" title="\phi=1+1/\phi"></span>, где <span class="inline-formula"><img class="img-inline-formula img-formula" width="117" height="20" src="../../formulae/UjJadbN6A6Af7gemc_E398qzlsLx0k7YuMSyaw.png" alt="\phi=(1+\sqrt{5})/2" title="\phi=(1+\sqrt{5})/2"></span> в общем очевидно что <span class="inline-formula"><img class="img-inline-formula img-formula" width="10" height="15" src="../../formulae/nnhzdqchKKCzaVcrUWETL.T75aNctBowFpJaFA.png" alt="\phi" title="\phi"></span> фиксированная точка на таком отображении.
    </p>
   </div>
<div class="code-scheme">
<pre class="code literal-block"><span></span><span class="linenos">1</span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">phi</span> <span class="nv">x</span><span class="p">)</span>
<span class="linenos">2</span>  <span class="p">(</span><span class="nf">fixed-point</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="p">(</span><span class="nb">/ </span><span class="mi">1</span> <span class="nv">y</span><span class="p">)))</span>
<span class="linenos">3</span>  <span class="mf">1.0</span><span class="p">))</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="p">(</span><span class="nf">phi</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">;Value: 1.6180327868852458</span>
</pre>
</div>  </div>
 </div>
 <div class="chapter-block">
  <h2>
   Упражнение 1.36
  </h2>
  <div>
   <div>
    <p>
     Измените процедуру fixed-point чтобы она печатала последовательность генерируемых приближений используя newline и display из упражнения 1.22. Затем найдите решение для <span class="inline-formula"><img class="img-inline-formula img-formula" width="76" height="11" src="../../formulae/HM9Qm.s3HgJ57VPQ4wJ9rQUqMNF5eAQN2wpsuQ.png" alt="x^x=1000" title="x^x=1000"></span> найдя фиксированную точку для <span class="inline-formula"><img class="img-inline-formula img-formula" width="164" height="17" src="../../formulae/XbkaMPB9jJlE1P3QZghbOy1J0EdWxwV8s53z7g.png" alt="x\mapsto\log(1000)/\log(x)" title="x\mapsto\log(1000)/\log(x)"></span>. Сравните количество шагов с использованием усреднения и без него.
    </p>
   </div>
<div class="code-scheme">
<pre class="code literal-block"><span></span><span class="linenos"> 1</span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">fixed-point</span> <span class="nv">f</span> <span class="nv">first-guess</span><span class="p">)</span>
<span class="linenos"> 2</span>  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">close-enough?</span> <span class="nv">v1</span> <span class="nv">v2</span><span class="p">)</span>
<span class="linenos"> 3</span>    <span class="p">(</span><span class="nb">&lt; </span><span class="p">(</span><span class="nb">abs </span><span class="p">(</span><span class="nb">- </span><span class="nv">v1</span> <span class="nv">v2</span><span class="p">))</span> <span class="nv">tolerance</span><span class="p">))</span>
<span class="linenos"> 4</span>  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">try</span> <span class="nv">guess</span><span class="p">)</span>
<span class="linenos"> 5</span>    <span class="p">(</span><span class="nf">newline</span><span class="p">)</span>
<span class="linenos"> 6</span>    <span class="p">(</span><span class="nb">display </span><span class="nv">guess</span><span class="p">)</span>
<span class="linenos"> 7</span>    <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">next</span> <span class="p">(</span><span class="nf">f</span> <span class="nv">guess</span><span class="p">)))</span>
<span class="linenos"> 8</span>      <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">close-enough?</span> <span class="nv">guess</span> <span class="nv">next</span><span class="p">)</span>
<span class="linenos"> 9</span>          <span class="nv">next</span>
<span class="linenos">10</span>          <span class="p">(</span><span class="nf">try</span> <span class="nv">next</span><span class="p">))))</span>
<span class="linenos">11</span>  <span class="p">(</span><span class="nf">try</span> <span class="nv">first-guess</span><span class="p">))</span>
</pre>
</div>
<div class="code-scheme">
<pre class="code literal-block"><span></span><span class="linenos">1</span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">xx1000</span><span class="p">)</span>
<span class="linenos">2</span>  <span class="p">(</span><span class="nf">fixed-point</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nb">log </span><span class="mi">1000</span><span class="p">)</span> <span class="p">(</span><span class="nb">log </span><span class="nv">y</span><span class="p">)))</span>
<span class="linenos">3</span>               <span class="mf">2.0</span><span class="p">))</span>
<span class="linenos">4</span><span class="p">(</span><span class="nf">xx1000</span><span class="p">)</span>
</pre>
</div>   <div>
    <p>
     2. 9.965784284662087 3.004472209841214 6.279195757507157 3.759850702401539 5.215843784925895 4.182207192401397 4.8277650983445906 4.387593384662677 4.671250085763899 4.481403616895052 4.6053657460929 4.5230849678718865 4.577114682047341 4.541382480151454 4.564903245230833 4.549372679303342 4.559606491913287 4.552853875788271 4.557305529748263 4.554369064436181 4.556305311532999 4.555028263573554 4.555870396702851 4.555315001192079 4.5556812635433275 4.555439715736846 4.555599009998291 4.555493957531389 4.555563237292884 4.555517548417651 4.555547679306398 4.555527808516254 4.555540912917957 ;Value: 4.555532270803653
    </p>
    <p>
     35 раз.
    </p>
   </div>
<div class="code-scheme">
<pre class="code literal-block"><span></span><span class="linenos">1</span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">xx1000</span><span class="p">)</span>
<span class="linenos">2</span>  <span class="p">(</span><span class="nf">fixed-point</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">y</span><span class="p">)</span> <span class="p">(</span><span class="nf">average</span> <span class="nv">y</span> <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nb">log </span><span class="mi">1000</span><span class="p">)</span> <span class="p">(</span><span class="nb">log </span><span class="nv">y</span><span class="p">))))</span>
<span class="linenos">3</span>               <span class="mf">2.0</span><span class="p">))</span>
<span class="linenos">4</span><span class="p">(</span><span class="nf">xx1000</span><span class="p">)</span>
</pre>
</div>   <div>
    <p>
     2. 5.9828921423310435 4.922168721308343 4.628224318195455 4.568346513136242 4.5577305909237005 4.555909809045131 4.555599411610624 4.5555465521473675 ;Value: 4.555537551999825
    </p>
    <p>
     10 раз.
    </p>
   </div>
  </div>
 </div>
 <div class="chapter-block">
  <h2>
   Упражнение 1.37
  </h2>
  <div>
   <div>
    <p>
     a. Бесконечная непрерывная дробь, выражение вида <span class="inline-formula"><img class="img-inline-formula img-formula" width="137" height="42" src="../../formulae/sjdXVLc6Vxzo8R25UmTxO.UuXfYfmoa9vN_8.Q.png" alt="f=\frac{N_1}{D_1+\frac{N_2}{D_2+\frac{N_3}{D_3+...}}}" title="f=\frac{N_1}{D_1+\frac{N_2}{D_2+\frac{N_3}{D_3+...}}}"></span>. В качестве примера можно показать что если для всех i <span class="inline-formula"><img class="img-inline-formula img-formula" width="51" height="14" src="../../formulae/a5St5HY2vJG2jaktUsvEtzVWFraPzgmbnMYF1g.png" alt="N_i=1" title="N_i=1"></span> <span class="inline-formula"><img class="img-inline-formula img-formula" width="52" height="14" src="../../formulae/bDp8GpJmdsEE0J6UTQXqXGylrL1NSnQeOKvqew.png" alt="D_i=1" title="D_i=1"></span>, то дробь будут равна <span class="inline-formula"><img class="img-inline-formula img-formula" width="28" height="17" src="../../formulae/jqoyPqGFD.741uy0dJ7pDnObupyLxw9ZqHDK_w.png" alt="1/\phi" title="1/\phi"></span>, где <span class="inline-formula"><img class="img-inline-formula img-formula" width="10" height="15" src="../../formulae/nnhzdqchKKCzaVcrUWETL.T75aNctBowFpJaFA.png" alt="\phi" title="\phi"></span> золотое сечение рассмотренное в упражнении 1.22. Один из способов приближенного вычисления такой дроби это отсечь дальнейшее деление при каком-то i=k. Такое усечение называется k-выраженная конечная непрерывная дробь. <span class="inline-formula"><img class="img-inline-formula img-formula" width="79" height="43" src="../../formulae/5YQQAqK.eBLHAcmk.ZOTVEMFDhO2rwHnTcpQRA.png" alt="\frac{N_1}{D_1+\frac{N_2}{...+\frac{N_k}{D_k}}}" title="\frac{N_1}{D_1+\frac{N_2}{...+\frac{N_k}{D_k}}}"></span>. Предположим что n и d процедуры одного аргумента (в терминах индекса i), которые возвращают <span class="inline-formula"><img class="img-inline-formula img-formula" width="20" height="14" src="../../formulae/sZiS..WGvCGhxZnDSGl5MdBWBV0bOes6DufUgQ.png" alt="N_i" title="N_i"></span> и <span class="inline-formula"><img class="img-inline-formula img-formula" width="20" height="14" src="../../formulae/E9O3WRQowdTN.EcibQkKJgNdUqBImg.3BViLZQ.png" alt="D_i" title="D_i"></span> в терминологии непрерывной дроби. Определите процедуру cont-frac так что выполнение (cont-frac n d k) вычисляет значение дроби усеченной по k. Проверьте вашу процедуру на приближенное вычисление <span class="inline-formula"><img class="img-inline-formula img-formula" width="28" height="17" src="../../formulae/jqoyPqGFD.741uy0dJ7pDnObupyLxw9ZqHDK_w.png" alt="1/\phi" title="1/\phi"></span> используя код
    </p>
   </div>
<div class="code-scheme">
<pre class="code literal-block"><span></span><span class="linenos">1</span><span class="p">(</span><span class="nf">cont-frac</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos">2</span>           <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos">3</span>           <span class="nv">k</span><span class="p">)</span>
</pre>
</div>   <div>
    <p>
     b. Напишите рекурсивную и итеративную реализацию процедуры cont-frac.
    </p>
   </div>
<div class="code-scheme">
<pre class="code literal-block"><span></span><span class="linenos"> 1</span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">cont-frac</span> <span class="nv">n</span> <span class="nv">d</span> <span class="nv">k</span><span class="p">)</span>
<span class="linenos"> 2</span>  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">revert-index</span> <span class="nv">n</span> <span class="nv">d</span> <span class="nv">i</span><span class="p">)</span>
<span class="linenos"> 3</span>    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="nv">i</span> <span class="nv">k</span><span class="p">)</span>
<span class="linenos"> 4</span>        <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nf">n</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">d</span> <span class="nv">i</span><span class="p">)</span> <span class="mf">0.0</span><span class="p">))</span>
<span class="linenos"> 5</span>        <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nf">n</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">d</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nf">revert-index</span> <span class="nv">n</span> <span class="nv">d</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">i</span> <span class="mi">1</span><span class="p">))))))</span>
<span class="linenos"> 6</span>  <span class="p">(</span><span class="nf">revert-index</span> <span class="nv">n</span> <span class="nv">d</span> <span class="mi">0</span><span class="p">))</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="p">(</span><span class="nf">cont-frac</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos"> 9</span>           <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos">10</span>           <span class="mi">100</span><span class="p">)</span> <span class="c1">;Value: .6180339887498948</span>
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">cont-frac</span> <span class="nv">n</span> <span class="nv">d</span> <span class="nv">k</span><span class="p">)</span>
<span class="linenos">14</span>  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">iter</span> <span class="nv">i</span> <span class="nv">result</span><span class="p">)</span>
<span class="linenos">15</span>    <span class="p">(</span><span class="nf">newline</span><span class="p">)</span>
<span class="linenos">16</span>    <span class="p">(</span><span class="nb">display </span><span class="nv">result</span><span class="p">)</span>
<span class="linenos">17</span>    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">i</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">18</span>        <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nf">n</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">d</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">result</span><span class="p">))</span>
<span class="linenos">19</span>        <span class="p">(</span><span class="nf">iter</span> <span class="p">(</span><span class="nb">- </span><span class="nv">i</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nf">n</span> <span class="nv">i</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="p">(</span><span class="nf">d</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">result</span><span class="p">)))))</span>
<span class="linenos">20</span>  <span class="p">(</span><span class="nf">iter</span> <span class="nv">k</span> <span class="mf">0.0</span><span class="p">))</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="p">(</span><span class="nf">cont-frac</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos">23</span>           <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos">24</span>           <span class="mi">100</span><span class="p">)</span> <span class="c1">;Value: .6180339887498948</span>
</pre>
</div>  </div>
 </div>
 <div class="chapter-block">
  <h2>
   Упражнение 1.38
  </h2>
  <div>
   <div>
    <p>
     В 1737 швейцарский математик Леонард Эйлер опубликовал мемуары De Fractionibus Continuis, которые содержали запись непрерывной дроби для e-2, где e - основание натурального логарифма. В этой дроби все Ni = 1, а Di соответственно 1, 2, 1, 1, 4, 1, 1, 6, 1, 1, 8, ... Напишите процедуру для приближенного вычисления e.
    </p>
   </div>
<div class="code-scheme">
<pre class="code literal-block"><span></span><span class="linenos"> 1</span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">e-approximation</span> <span class="nv">k</span><span class="p">)</span>
<span class="linenos"> 2</span>  <span class="p">(</span><span class="nb">+ </span><span class="mi">2</span> <span class="p">(</span><span class="nf">cont-frac</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos"> 3</span>                  <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">i</span> <span class="mi">0</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos"> 4</span>                               <span class="p">((</span><span class="nb">= </span><span class="nv">i</span> <span class="mi">1</span><span class="p">)</span> <span class="mf">2.0</span><span class="p">)</span>
<span class="linenos"> 5</span>                               <span class="p">((</span><span class="nb">&lt;= </span><span class="nv">i</span> <span class="mi">3</span><span class="p">)</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="linenos"> 6</span>                               <span class="p">((</span><span class="nb">= </span><span class="p">(</span><span class="nb">remainder </span><span class="p">(</span><span class="nb">- </span><span class="nv">i</span> <span class="mi">1</span><span class="p">)</span> <span class="mi">3</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="nb">* </span><span class="mi">2</span> <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nb">- </span><span class="nv">i</span> <span class="mi">1</span><span class="p">)</span> <span class="mi">3</span><span class="p">)))</span>
<span class="linenos"> 7</span>                               <span class="p">(</span><span class="k">else </span><span class="mf">1.0</span><span class="p">)))</span>
<span class="linenos"> 8</span>                  <span class="nv">k</span><span class="p">)))</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="p">(</span><span class="nf">e-approximation</span> <span class="mi">100</span><span class="p">)</span> <span class="c1">;Value: 2.7208245385621153</span>
</pre>
</div>  </div>
 </div>
 <div class="chapter-block">
  <h2>
   Упражнение 1.39
  </h2>
  <div>
   <div>
    <p>
     Бесконечная дробь для тангенса была опубликована в 1970 немецким математиком Ламбертом. <span class="inline-formula"><img class="img-inline-formula img-formula" width="133" height="37" src="../../formulae/Kh3Tu0aZ5ik5TrqUeTNCTUfOTq2DBN23c_X9Qw.png" alt="\tan{x}=\frac{x}{1-\frac{x^2}{3-\frac{x^2}{5-...}}}" title="\tan{x}=\frac{x}{1-\frac{x^2}{3-\frac{x^2}{5-...}}}"></span>. Напишите процедуру для приближенного вычисления тангенса.
    </p>
   </div>
<div class="code-scheme">
<pre class="code literal-block"><span></span><span class="linenos"> 1</span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">cont-frac-params</span> <span class="nv">n</span> <span class="nv">d</span> <span class="nv">k</span> <span class="nv">x</span><span class="p">)</span>
<span class="linenos"> 2</span>  <span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">iter</span> <span class="nv">i</span> <span class="nv">result</span><span class="p">)</span>
<span class="linenos"> 3</span>    <span class="p">(</span><span class="nf">newline</span><span class="p">)</span>
<span class="linenos"> 4</span>    <span class="p">(</span><span class="nb">display </span><span class="nv">result</span><span class="p">)</span>
<span class="linenos"> 5</span>    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">= </span><span class="nv">i</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos"> 6</span>        <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nf">n</span> <span class="nv">i</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">- </span><span class="p">(</span><span class="nf">d</span> <span class="nv">i</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">result</span><span class="p">))</span>
<span class="linenos"> 7</span>        <span class="p">(</span><span class="nf">iter</span> <span class="p">(</span><span class="nb">- </span><span class="nv">i</span> <span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="p">(</span><span class="nf">n</span> <span class="nv">i</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">- </span><span class="p">(</span><span class="nf">d</span> <span class="nv">i</span> <span class="nv">x</span><span class="p">)</span> <span class="nv">result</span><span class="p">)))))</span>
<span class="linenos"> 8</span>  <span class="p">(</span><span class="nf">iter</span> <span class="nv">k</span> <span class="mf">0.0</span><span class="p">))</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">tan-cf</span> <span class="nv">x</span> <span class="nv">k</span><span class="p">)</span>
<span class="linenos">12</span>  <span class="p">(</span><span class="nf">cont-frac-params</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span> <span class="nv">j</span><span class="p">)</span> <span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">= </span><span class="nv">i</span> <span class="mi">0</span><span class="p">)</span> <span class="nv">j</span><span class="p">)</span>
<span class="linenos">13</span>                          <span class="p">(</span><span class="k">else </span><span class="p">(</span><span class="nf">square</span> <span class="nv">j</span><span class="p">))))</span>
<span class="linenos">14</span>           <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span> <span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="p">(</span><span class="nb">* </span><span class="mi">2</span> <span class="nv">i</span><span class="p">)))</span>
<span class="linenos">15</span>           <span class="mi">100</span> <span class="nv">x</span><span class="p">))</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="p">(</span><span class="nf">tan-cf</span> <span class="mi">2</span> <span class="mi">100</span><span class="p">)</span><span class="c1">;Value: -2.185039863261519</span>
</pre>
</div>  </div>
 </div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/procedures_as_general_methods/" rel="tag">procedures_as_general_methods</a></li>
            <li><a class="tag p-category" href="../../categories/scheme/" rel="tag">scheme</a></li>
            <li><a class="tag p-category" href="../../categories/sicp/" rel="tag">sicp</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../sicp-protsedury-vysshego-poriadka-uprazhneniia-129-133/" rel="prev" title="SICP Процедуры высшего порядка, упражнения 1.29-1.34">Предыдущая запись</a>
            </li>
            <li class="next">
                <a href="../sicp-134-protsedury-kak-vozvrashchaemye-znacheniia-uprazhneniia-140-146/" rel="next" title="SICP 1.34 Процедуры как возвращаемые значения, упражнения 1.40-1.46">Следующая запись</a>
            </li>
        </ul></nav></aside></article></main><footer id="footer"><p>Contents © 2021         <a href="mailto:anton.s.pilipenko@gmail.com">Velikii Nehochuha</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
                <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
