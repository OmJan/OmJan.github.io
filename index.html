<!DOCTYPE html>
<html>
  <head>
    <title>OmJan page</title>
    <style type="text/css">
      html{ height: 100%; }
      body{ display: flex; flex-direction: column; height: 100%;}
      header{ flex: 0 0 auto; }
      .wrap-content{ flex: 1 0 auto; }
      .main-content {
        display: flex;
        flex-direction: row;
        justify-content: center;
        flex-wrap: wrap;
      }
      .main-content section { width: 320px; }
      footer{ flex: 0 0 auto; }
      .st0{fill:black;}
      .st1{fill:green;}
      .st2{fill:red;}
      .multik {
        background-color: #AAA;
        width: 320px;
        height: 500px;
      }
    </style>
  </head>
  <body>
    <header></header>
    <section class="wrap-content">
      <div class="main-content">
        <section>
          <div class="container">
            <a href="http://stackoverflow.com/users/4638004/janom?theme=clean">
              <img src="http://stackoverflow.com/users/flair/4638004.png" width="208" height="58" alt="profile for Janom at Stack Overflow, Q&amp;A for professional and enthusiast programmers" title="profile for Janom at Stack Overflow, Q&amp;A for professional and enthusiast programmers">
            </a>
          </div>
        </section>
        <section>
          <button id="stop">Pause</button><button id="start">Start</button><button id="reset">Reset</button>
          <div class="multik">
            <svg xmlns="http://www.w3.org/2000/svg" id="solly" viewBox="0 0 320 500">
              <g id="Sun2">
                <circle id="gameBall" class="st2" cx="305" cy="395" r="5"/>
                <!--
                <polyline points="0, 500.0 1, 497.01 2, 494.04 3, 491.09 4, 488.16 5, 485.25 6, 482.36 7, 479.49 8, 476.64 9, 473.81 10, 471.0 11, 468.21 12, 465.44 13, 462.69 14, 459.96 15, 457.25 16, 454.56 17, 451.89 18, 449.24 19, 446.61 20, 444.0 21, 441.41 22, 438.84 23, 436.29 24, 433.76 25, 431.25 26, 428.76 27, 426.29 28, 423.84 29, 421.41 30, 419.0 31, 416.61 32, 414.24 33, 411.89 34, 409.56 35, 407.25 36, 404.96 37, 402.69 38, 400.44 39, 398.21 40, 396.0 41, 393.81 42, 391.64 43, 389.49 44, 387.36 45, 385.25 46, 383.16 47, 381.09 48, 379.04 49, 377.01 50, 375.0 51, 373.01 52, 371.04 53, 369.09 54, 367.16 55, 365.25 56, 363.36 57, 361.49 58, 359.64 59, 357.81 60, 356.0 61, 354.21 62, 352.44 63, 350.69 64, 348.96 65, 347.25 66, 345.56 67, 343.89 68, 342.24 69, 340.61 70, 339.0 71, 337.41 72, 335.84 73, 334.29 74, 332.76 75, 331.25 76, 329.76 77, 328.29 78, 326.84 79, 325.41 80, 324.0 81, 322.61 82, 321.24 83, 319.89 84, 318.56 85, 317.25 86, 315.96 87, 314.69 88, 313.44 89, 312.21 90, 311.0 91, 309.81 92, 308.64 93, 307.49 94, 306.36 95, 305.25 96, 304.16 97, 303.09 98, 302.04 99, 301.01 100, 300.0 101, 299.01 102, 298.04 103, 297.09 104, 296.16 105, 295.25 106, 294.36 107, 293.49 108, 292.64 109, 291.81 110, 291.0 111, 290.21 112, 289.44 113, 288.69 114, 287.96 115, 287.25 116, 286.56 117, 285.89 118, 285.24 119, 284.61 120, 284.0 121, 283.41 122, 282.84 123, 282.29 124, 281.76 125, 281.25 126, 280.76 127, 280.29 128, 279.84 129, 279.41 130, 279.0 131, 278.61 132, 278.24 133, 277.89 134, 277.56 135, 277.25 136, 276.96 137, 276.69 138, 276.44 139, 276.21 140, 276.0 141, 275.81 142, 275.64 143, 275.49 144, 275.36 145, 275.25 146, 275.16 147, 275.09 148, 275.04 149, 275.01 150, 275.0 151, 275.01 152, 275.04 153, 275.09 154, 275.16 155, 275.25 156, 275.36 157, 275.49 158, 275.64 159, 275.81 160, 276.0 161, 276.21 162, 276.44 163, 276.69 164, 276.96 165, 277.25 166, 277.56 167, 277.89 168, 278.24 169, 278.61 170, 279.0 171, 279.41 172, 279.84 173, 280.29 174, 280.76 175, 281.25 176, 281.76 177, 282.29 178, 282.84 179, 283.41 180, 284.0 181, 284.61 182, 285.24 183, 285.89 184, 286.56 185, 287.25 186, 287.96 187, 288.69 188, 289.44 189, 290.21 190, 291.0 191, 291.81 192, 292.64 193, 293.49 194, 294.36 195, 295.25 196, 296.16 197, 297.09 198, 298.04 199, 299.01 200, 300.0 201, 301.01 202, 302.04 203, 303.09 204, 304.16 205, 305.25 206, 306.36 207, 307.49 208, 308.64 209, 309.81 210, 311.0 211, 312.21 212, 313.44 213, 314.69 214, 315.96 215, 317.25 216, 318.56 217, 319.89 218, 321.24 219, 322.61 220, 324.0 221, 325.41 222, 326.84 223, 328.29 224, 329.76 225, 331.25 226, 332.76 227, 334.29 228, 335.84 229, 337.41 230, 339.0 231, 340.61 232, 342.24 233, 343.89 234, 345.56 235, 347.25 236, 348.96 237, 350.69 238, 352.44 239, 354.21 240, 356.0 241, 357.81 242, 359.64 243, 361.49 244, 363.36 245, 365.25 246, 367.16 247, 369.09 248, 371.04 249, 373.01 250, 375.0 251, 377.01 252, 379.04 253, 381.09 254, 383.16 255, 385.25 256, 387.36 257, 389.49 258, 391.64 259, 393.81 260, 396.0 261, 398.21 262, 400.44 263, 402.69 264, 404.96 265, 407.25 266, 409.56 267, 411.89 268, 414.24 269, 416.61 270, 419.0 271, 421.41 272, 423.84 273, 426.29 274, 428.76 275, 431.25 276, 433.76 277, 436.29 278, 438.84 279, 441.41 280, 444.0 281, 446.61 282, 449.24 283, 451.89 284, 454.56 285, 457.25 286, 459.96 287, 462.69 288, 465.44 289, 468.21 290, 471.0 291, 473.81 292, 476.64 293, 479.49 294, 482.36 295, 485.25 296, 488.16 297, 491.09 298, 494.04 299, 497.01 300, 500.0 301, 503.01 302, 506.04 303, 509.09 304, 512.16 305, 515.25 306, 518.36 307, 521.49 308, 524.64 309, 527.81 310, 531.0 311, 534.21 312, 537.44 313, 540.69 314, 543.96 315, 547.25 316, 550.56 317, 553.89 318, 557.24 319, 560.61" fill="none" stroke-width="1" stroke="rgb(33,33,33)"/>
                -->
                <!-- var yCalc = x*x/100 -3*x + 500; -->
                <!-- Start pipe -->
                <polyline points="26,156.77 27,148.93 28,143.34 29,138.76 30,134.80 31,131.27 32,128.06 33,125.10 34,122.34 35,119.76 36,117.32 37,115.01 38,112.81 39,110.70 40,108.69 41,106.75 42,104.89 43,103.10 44,101.36 45,99.69 46,98.06 47,96.49 48,94.96 49,93.48 50,92.03 51,90.63 52,89.26 53,87.93 54,86.63 55,85.36 56,84.12 57,82.91 58,81.73 59,80.58 60,79.45 61,78.35 62,77.27 63,76.21 64,75.18 65,74.17 66,73.18 67,72.20 68,71.25 69,70.32 70,69.41 71,68.51 72,67.63 73,66.77 74,65.93 75,65.10 76,64.29 77,63.49 78,62.71 79,61.94 80,61.19 81,60.46 82,59.73 83,59.02 84,58.33 85,57.64 86,56.97 87,56.32 88,55.67 89,55.04 90,54.42 91,53.81 92,53.21 93,52.63 94,52.06 95,51.49 96,50.94 97,50.40 98,49.87 99,49.35 100,48.84 101,48.34 102,47.86 103,47.38 104,46.91 105,46.45 106,46.00 107,45.57 108,45.14 109,44.72 110,44.31 111,43.90 112,43.51 113,43.13 114,42.76 115,42.39 116,42.04 117,41.69 118,41.35 119,41.02 120,40.70 121,40.39 122,40.08 123,39.78 124,39.50 125,39.22 126,38.95 127,38.68 128,38.43 129,38.18 130,37.94 131,37.71 132,37.49 133,37.27 134,37.07 135,36.87 136,36.68 137,36.49 138,36.32 139,36.15 140,35.99 141,35.84 142,35.69 143,35.55 144,35.42 145,35.30 146,35.19 147,35.08 148,34.98 149,34.89 150,34.80 151,34.72 152,34.65 153,34.59 154,34.53 155,34.49 156,34.45 157,34.41 158,34.39 159,34.37 160,34.36 161,34.35 162,34.36 163,34.37 164,34.39 165,34.41 166,34.45 167,34.49 168,34.53 169,34.59 170,34.65 171,34.72 172,34.80 173,34.89 174,34.98 175,35.08 176,35.19 177,35.30 178,35.42 179,35.55 180,35.69 181,35.84 182,35.99 183,36.15 184,36.32 185,36.49 186,36.68 187,36.87 188,37.07 189,37.27 190,37.49 191,37.71 192,37.94 193,38.18 194,38.43 195,38.68 196,38.95 197,39.22 198,39.50 199,39.78 200,40.08 201,40.39 202,40.70 203,41.02 204,41.35 205,41.69 206,42.04 207,42.39 208,42.76 209,43.13 210,43.51 211,43.90 212,44.31 213,44.72 214,45.14 215,45.57 216,46.00 217,46.45 218,46.91 219,47.38 220,47.86 221,48.34 222,48.84 223,49.35 224,49.87 225,50.40 226,50.94 227,51.49 228,52.06 229,52.63 230,53.21 231,53.81 232,54.42 233,55.04 234,55.67 235,56.32 236,56.97 237,57.64 238,58.33 239,59.02 240,59.73 241,60.46 242,61.19 243,61.94 244,62.71 245,63.49 246,64.29 247,65.10 248,65.93 249,66.77 250,67.63 251,68.51 252,69.41 253,70.32 254,71.25 255,72.20 256,73.18 257,74.17 258,75.18 259,76.21 260,77.27 261,78.35 262,79.45 263,80.58 264,81.73 265,82.91 266,84.12 267,85.36 268,86.63 269,87.93 270,89.26 271,90.63 272,92.03 273,93.48 274,94.96 275,96.49 276,98.06 277,99.69 278,101.36 279,103.10 280,104.89 281,106.75 282,108.69 283,110.70 284,112.81 285,115.01 286,117.32 287,119.76 288,122.34 289,125.10 290,128.06 291,131.27 292,134.80 293,138.76 294,143.34 295,148.93 296,156.77" fill="none" stroke-width="0.5" stroke="rgb(33,33,33)"/>
                <!-- c = [(x,  (170 -(18400 - (x-161)**2)**(0.5) )  ) for x in xrange(0, 340) if (18400 - (x-161)**2) >  0] -->
                <polyline points="5,138.78 6,134.17 7,130.11 8,126.46 9,123.11 10,120.00 11,117.09 12,114.36 13,111.77 14,109.30 15,106.95 16,104.70 17,102.54 18,100.46 19,98.45 20,96.52 21,94.64 22,92.82 23,91.06 24,89.35 25,87.69 26,86.07 27,84.50 28,82.96 29,81.46 30,80.00 31,78.57 32,77.18 33,75.81 34,74.48 35,73.18 36,71.90 37,70.65 38,69.42 39,68.22 40,67.04 41,65.89 42,64.76 43,63.65 44,62.56 45,61.49 46,60.44 47,59.41 48,58.39 49,57.40 50,56.42 51,55.46 52,54.52 53,53.59 54,52.68 55,51.78 56,50.90 57,50.04 58,49.19 59,48.35 60,47.53 61,46.72 62,45.92 63,45.14 64,44.37 65,43.61 66,42.86 67,42.13 68,41.41 69,40.70 70,40.00 71,39.31 72,38.64 73,37.97 74,37.32 75,36.68 76,36.04 77,35.42 78,34.81 79,34.21 80,33.62 81,33.04 82,32.46 83,31.90 84,31.35 85,30.81 86,30.27 87,29.75 88,29.23 89,28.72 90,28.23 91,27.74 92,27.26 93,26.78 94,26.32 95,25.86 96,25.42 97,24.98 98,24.55 99,24.13 100,23.71 101,23.31 102,22.91 103,22.52 104,22.14 105,21.76 106,21.39 107,21.03 108,20.68 109,20.34 110,20.00 111,19.67 112,19.35 113,19.03 114,18.73 115,18.42 116,18.13 117,17.85 118,17.57 119,17.29 120,17.03 121,16.77 122,16.52 123,16.28 124,16.04 125,15.81 126,15.58 127,15.37 128,15.16 129,14.95 130,14.76 131,14.57 132,14.39 133,14.21 134,14.04 135,13.88 136,13.72 137,13.57 138,13.42 139,13.29 140,13.16 141,13.03 142,12.91 143,12.80 144,12.70 145,12.60 146,12.51 147,12.42 148,12.34 149,12.27 150,12.20 151,12.14 152,12.09 153,12.04 154,12.00 155,11.97 156,11.94 157,11.91 158,11.90 159,11.89 160,11.89 161,11.89 162,11.90 163,11.91 164,11.94 165,11.97 166,12.00 167,12.04 168,12.09 169,12.14 170,12.20 171,12.27 172,12.34 173,12.42 174,12.51 175,12.60 176,12.70 177,12.80 178,12.91 179,13.03 180,13.16 181,13.29 182,13.42 183,13.57 184,13.72 185,13.88 186,14.04 187,14.21 188,14.39 189,14.57 190,14.76 191,14.95 192,15.16 193,15.37 194,15.58 195,15.81 196,16.04 197,16.28 198,16.52 199,16.77 200,17.03 201,17.29 202,17.57 203,17.85 204,18.13 205,18.42 206,18.73 207,19.03 208,19.35 209,19.67 210,20.00 211,20.34 212,20.68 213,21.03 214,21.39 215,21.76 216,22.14 217,22.52 218,22.91 219,23.31 220,23.71 221,24.13 222,24.55 223,24.98 224,25.42 225,25.86 226,26.32 227,26.78 228,27.26 229,27.74 230,28.23 231,28.72 232,29.23 233,29.75 234,30.27 235,30.81 236,31.35 237,31.90 238,32.46 239,33.04 240,33.62 241,34.21 242,34.81 243,35.42 244,36.04 245,36.68 246,37.32 247,37.97 248,38.64 249,39.31 250,40.00 251,40.70 252,41.41 253,42.13 254,42.86 255,43.61 256,44.37 257,45.14 258,45.92 259,46.72 260,47.53 261,48.35 262,49.19 263,50.04 264,50.90 265,51.78 266,52.68 267,53.59 268,54.52 269,55.46 270,56.42 271,57.40 272,58.39 273,59.41 274,60.44 275,61.49 276,62.56 277,63.65 278,64.76 279,65.89 280,67.04 281,68.22 282,69.42 283,70.65 284,71.90 285,73.18 286,74.48 287,75.81 288,77.18 289,78.57 290,80.00 291,81.46 292,82.96 293,84.50 294,86.07 295,87.69 296,89.35 297,91.06 298,92.82 299,94.64 300,96.52 301,98.45 302,100.46 303,102.54 304,104.70 305,106.95 306,109.30 307,111.77 308,114.36 309,117.09 310,120.00 311,123.11 312,126.46 313,130.11 314,134.17 315,138.78" fill="none" stroke-width="0.5" stroke="rgb(33,33,33)"/>
                <!--c = (170 -(25000 - (x-160)**2)**(0.5) )  ) for x in xrange(0, 340) if ((25000 - (x-160)**2) >  0) and (x <= 315) and (x >= 5)] -->
                <polyline points="296 395, 296, 150" fill="none" stroke-width="0.5" stroke="rgb(33,33,33)"/>
                <polyline points="315 395, 315, 134" fill="none" stroke-width="0.5" stroke="rgb(33,33,33)"/>
                <!--y = x*x/100 -3*x + 400 -->
                <!--y' = f(x') + (2*x'/100 - 3)(x-x')-->
                <!-- End start pipe -->
              </g>
              <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="spring">
                <rect style="fill:#ccc;" id="rect3378" width="20" height="110" x="295" y="395" />
              </g>
            </svg>
          </div>
        </section>
        <section>
        </section>
      </div>
    </section>
    <footer>
      <nav>
        <ul>
          <li><a href="https://github.com/OmJan">Github</a></li>
        </ul>
      </nav>
    </footer>
    <script type="text/javascript">
      var OUT = 99999999999;
      const DELTA = 10;
      const PI = 3.14;
      function getRandomArbitary(min, max) {
        return Math.random() * (max - min) + min;
      }
      var Spring = function () {
        var self = this;
        this.count = 0;
        this.animateSpring = function animateSpring() {
          self.count = self.count + 1;
          console.log(self.count);
        };
        this.startSpringTime = function startSpringTime() {
          self.count = 0;
          self.springInterval = setInterval(self.animateSpring, 100);
        };
        this.stopSprintTime = function stopSpringTime(e) {
          console.log(self.count);
          clearInterval(self.springInterval);
        };
      };
      var Barrier = function () {
        var self = this;
        this.init = function init(xDiapason, yDiapason, func, getSpeedAfterBreak) {
          self.xDiapason = xDiapason;
          self.yDiapason = yDiapason;
          self.func = func; // must be function y(x) and get args x, y
          self.getSpeedAfterBreak = getSpeedAfterBreak; // function, args: x, y, ySpeedBefore, xSeedBefore
        };
        this.checkBreak = function checkBreak(x, y) {
          var isBreak = false;
          if (y < self.yDiapason[1] && y > self.yDiapason[0]) {
            var yCalc = self.func(x, y);
            if (((Math.floor(y) - 1) <  Number((yCalc).toFixed(1))) && (Number((yCalc).toFixed(1)) < (Math.ceil(y) + 1))) {
              isBreak = true;
            } else {
              isBreak = false;
            }
            return isBreak;
          }
          return isBreak;
        };
      };
      var rPipeLine = new Barrier();
      rPipeLine.init(
        [315, 315],
        [134, 395],
        function (x, y) {
          if (Math.floor(x) === 315 || Math.ceil(x) === 315) {
            return y;
          } else {
            return OUT;
          }
        },
        function (x, y, xSpeedBefore, ySpeedBefore) {
          return [-xSpeedBefore, ySpeedBefore];
        }
      );
      var leftPipeLine = new Barrier();
      leftPipeLine.init(
        [296, 296],
        [150, 395],
        function (x, y) {
          if (Math.floor(x) === 296 || Math.ceil(x) === 296) {
            return y;
          } else {
            return OUT;
          }
        },
        function (x, y, xSpeedBefore, ySpeedBefore) {
          return [-xSpeedBefore, ySpeedBefore];
        }
      );
      // c = (170 -(25000 - (x-160)**2)**(0.5) )  ) for x in xrange(0, 340) if ((25000 - (x-160)**2) >  0) and (x <= 315) and (x >= 5)]
      // c = [(x,  (170 -(25000 - (x-160)**2)**(0.5) )  ) for x in xrange(0, 340) if ((25000 - (x-160)**2) >  0) and (x <= 315) and (x >= 5)]
      var upPipeArc = new Barrier();
      upPipeArc.init(
        [5, 315],
        [10, 150],
        function (x, y) {
          return (170 - Math.sqrt(25000 - Math.pow(x - 160, 2)) );
        },
        function (x, y, xSpeedBefore, ySpeedBefore) {
          var derivative = - (x - 160) / Math.sqrt(25000 - Math.pow(x - 160, 2));
          var tAngle = Math.atan(derivative);
          var vAngle = Math.atan(xSpeedBefore / ySpeedBefore);
          var diffAngle = Math.abs(Math.abs(tAngle < 0 ? (PI + tAngle) : tAngle) - Math.abs(vAngle < 0 ? (PI + vAngle) : vAngle));
          var normAngle = (diffAngle > PI/2) ? (PI - diffAngle) : diffAngle;
          var resAngle = normAngle*2;
          var xSpeedAfter = xSpeedBefore * Math.cos(resAngle) - ySpeedBefore * Math.sin(resAngle);
          var ySpeedAfter = xSpeedBefore * Math.sin(resAngle) + ySpeedBefore * Math.cos(resAngle);
          if (Math.floor(resAngle*180/PI) ==  68) {
            // resA = 68
            // xSpeed = -0.016
            // ySpeed = 0.15
            resAngle = - normAngle*2;
            xSpeedAfter = xSpeedBefore * Math.cos(resAngle) - ySpeedBefore * Math.sin(resAngle);
            ySpeedAfter = xSpeedBefore * Math.sin(resAngle) + ySpeedBefore * Math.cos(resAngle);
            return [-xSpeedAfter*0.9, -ySpeedAfter*0.9];
          }
          return [-xSpeedAfter*0.9, -ySpeedAfter*0.9];
        }
      );
      // c = [(x,  (170 -(18400 - (x-161)**2)**(0.5) )  ) for x in xrange(0, 340) if (18400 - (x-161)**2) >  0]
      var bottomPipeArc = new Barrier();
      bottomPipeArc.init(
        [5, 315],
        [5, 150],
        function (x, y) {
          return (170 -Math.sqrt(18400 - Math.pow(x - 161, 2)) );
        },
        function (x, y, xSpeedBefore, ySpeedBefore) {
          var derivative = - (x - 161) / Math.sqrt(18400 - Math.pow(x - 161, 2));
          var tAngle = Math.atan(derivative);
          var vAngle = Math.atan(xSpeedBefore / ySpeedBefore);
          var diffAngle = Math.abs(Math.abs(tAngle < 0 ? (PI + tAngle) : tAngle) - Math.abs(vAngle < 0 ? (PI + vAngle) : vAngle));
          var normAngle = (diffAngle > PI/2) ? (PI - diffAngle) : diffAngle;
          var resAngle = - normAngle*2;
          var xSpeedAfter = xSpeedBefore * Math.cos(resAngle) - ySpeedBefore * Math.sin(resAngle);
          var ySpeedAfter = xSpeedBefore * Math.sin(resAngle) + ySpeedBefore * Math.cos(resAngle);
          if (Math.floor(Math.abs(resAngle*180/PI)) ==  57) {
            console.log(resAngle*180/PI);
            // resA = 68
            // xSpeed = -0.016
            // ySpeed = 0.15
            resAngle = - normAngle*2;
            xSpeedAfter = xSpeedBefore * Math.cos(resAngle) - ySpeedBefore * Math.sin(resAngle);
            ySpeedAfter = xSpeedBefore * Math.sin(resAngle) + ySpeedBefore * Math.cos(resAngle);
            return [-xSpeedAfter*0.9, -ySpeedAfter*0.9];
          }
          return [xSpeedAfter*0.9, ySpeedAfter*0.9];
        }
      );
      var barriers = [
        rPipeLine,
        leftPipeLine,
        upPipeArc,
        bottomPipeArc
      ];
      var Ball = function () {
        var self = this;
        var e = document.getElementById ( 'gameBall' );
        this.xSpeed = -0.02; // +0.02;
        this.ySpeed = -0.35;
        this.yAcceleration = 0.0001;
        this.xAcceleration = 0;
        this.delta = DELTA;
        // work with surfaces and power
        this.prevSurface = undefined;
        this.currentSurface = undefined;
        // this.x = getRandomArbitary(0, 250);
        this.x = 305;
        e.setAttribute ( "cx", 305);
        this.y = 395;
        e.setAttribute ( "cy", 395);
        this.bang = false;
        this.init = function init(stopFunc) {
          this.stopCallBack = stopFunc;
        };
        this.stopBall = function stopBall() {
          self.xSpeed = 0;
          self.ySpeed = 0;
          self.yAcceleration = 0;
          self.xAcceleration = 0;
          self.stopCallBack();
        };
        this.setNewSpeed = function setNewSpeed(xSpeed, ySpeed) {
          self.xSpeed = xSpeed;
          self.ySpeed = ySpeed;
        };
        this.getNewSpeed = function getNewSpeed() {
          self.xSpeed = self.xSpeed + self.xAcceleration * self.delta;
          self.ySpeed = self.ySpeed + self.yAcceleration * self.delta;
        };
        this.getNewPosition = function getNewPosition() {
          var e, cxNew, cyNew;
          e = document.getElementById ( 'gameBall' );
          var cxPrev = e.getAttribute( 'cx' );
          var cyPrev = e.getAttribute( 'cy' );
          cyNew = parseFloat(cyPrev) + self.ySpeed * self.delta + self.yAcceleration * self.delta * self.delta / 2;
          cxNew = parseFloat(cxPrev) + self.xSpeed * self.delta + self.xAcceleration * self.delta * self.delta / 2;
          e.setAttribute ( "cx", cxNew );
          e.setAttribute ( "cy", cyNew );
          self.checkBreakPoint(cxNew, cyNew, self.xSpeed, self.ySpeed, self.setNewSpeed, self.getNewSpeed);
          // self.stopBall();
        };
        this.checkBreakPoint = function checkBreakPoint(x, y, xSpeedBefore, ySpeedBefore, breakSpeedFunc, simpleSpeedFunc) {
          var isBreak = false;
          for (var i in barriers) {
            if (barriers[i].checkBreak(x, y)) {
              isBreak = true;
              if (breakSpeedFunc) {
                breakSpeedFunc.apply(self, barriers[i].getSpeedAfterBreak(x, y, xSpeedBefore, ySpeedBefore));
                self.prevSurface = i;
              }
              // self.stopBall();
              break;
            }
          }
          if (isBreak == false) {
            simpleSpeedFunc();
          }
          return isBreak;
        };
      };
      var Game = function () {
        var self = this;
        this.animate = function animate() {
          self.gameBall.getNewPosition();
        };
        this.play = function play() {
          var gameBall = new Ball();
          gameBall.init(self.stop);
          self.gameBall = gameBall;
          self.animateInterval = setInterval(self.animate, DELTA);
        };
        this.stop = function stop() {
          clearInterval(self.animateInterval);
        };
        this.start = function start() {
          self.animateInterval = setInterval(self.animate, DELTA);
        };
        this.reset = function reset() {
          clearInterval(self.animateInterval);
          delete self.gameBall;
          var gameBall = new Ball();
          // e = document.getElementById ( 'gameBall' );
          // e.setAttribute ( "cx", gameBall.x );
          // e.setAttribute ( "cy", gameBall.y );
          self.gameBall = gameBall;
          self.animateInterval = setInterval(self.animate, DELTA);
        };
      };
      var game = new Game();
      game.play();
      var stop = document.getElementById('stop');
      var start = document.getElementById('start');
      var reset = document.getElementById('reset');
      stop.onclick = game.stop;
      start.onclick = game.start;
      reset.onclick = game.reset;
      var gameSpring = new Spring();
      var spring = document.getElementById('spring');
      spring.onmousedown = gameSpring.startSpringTime;
      spring.onmouseup = gameSpring.stopSprintTime;
    </script>
  </body>
</html>
